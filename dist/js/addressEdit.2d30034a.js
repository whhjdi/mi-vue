(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addressEdit"],{1146:function(e,t,a){},2241:function(e,t,a){"use strict";var n,o=a("c31d"),s=a("2b0e"),i=a("fe7e"),r=a("b650"),l=a("6605"),c=Object(i["a"])({render:function(){var e,t=this,a=t.$createElement,n=t._self._c||a;return n("transition",{attrs:{name:"van-dialog-bounce"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],class:[t.b(),t.className]},[t.title?n("div",{class:t.b("header",{isolated:!t.message&&!t.$slots.default}),domProps:{textContent:t._s(t.title)}}):t._e(),t.message||t.$slots.default?n("div",{class:t.b("content")},[t._t("default",[t.message?n("div",{class:t.b("message",(e={"has-title":t.title},e[t.messageAlign]=t.messageAlign,e)),domProps:{innerHTML:t._s(t.message)}}):t._e()])],2):t._e(),n("div",{staticClass:"van-hairline--top",class:t.b("footer",{buttons:t.showCancelButton&&t.showConfirmButton})},[n("van-button",{directives:[{name:"show",rawName:"v-show",value:t.showCancelButton,expression:"showCancelButton"}],class:t.b("cancel"),attrs:{size:"large",loading:t.loading.cancel,text:t.cancelButtonText||t.$t("cancel")},on:{click:function(e){t.handleAction("cancel")}}}),n("van-button",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmButton,expression:"showConfirmButton"}],class:[t.b("confirm"),{"van-hairline--left":t.showCancelButton&&t.showConfirmButton}],attrs:{size:"large",loading:t.loading.confirm,text:t.confirmButtonText||t.$t("confirm")},on:{click:function(e){t.handleAction("confirm")}}})],1)])])},name:"dialog",components:{VanButton:r["a"]},mixins:[l["a"]],props:{title:String,message:String,callback:Function,className:[String,Object,Array],beforeClose:Function,messageAlign:String,confirmButtonText:String,cancelButtonText:String,showCancelButton:Boolean,showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{handleAction:function(e){var t=this;this.beforeClose?(this.loading[e]=!0,this.beforeClose(e,function(a){!1!==a&&t.onClose(e),t.loading[e]=!1})):this.onClose(e)},onClose:function(e){this.$emit("input",!1),this.$emit(e),this.callback&&this.callback(e)}}}),u=a("a142"),d=function(){n=new(s["a"].extend(c))({el:document.createElement("div")}),n.$on("input",function(e){n.value=e}),document.body.appendChild(n.$el)},h=function e(t){return u["f"]?Promise.resolve():new Promise(function(a,s){n||d(),Object(o["a"])(n,e.currentOptions,t,{resolve:a,reject:s})})};h.defaultOptions={value:!0,title:"",message:"",overlay:!0,className:"",lockScroll:!0,beforeClose:null,messageAlign:"",confirmButtonText:"",cancelButtonText:"",showConfirmButton:!0,showCancelButton:!1,closeOnClickOverlay:!1,callback:function(e){n["confirm"===e?"resolve":"reject"](e)}},h.alert=h,h.confirm=function(e){return h(Object(o["a"])({showCancelButton:!0},e))},h.close=function(){n&&(n.value=!1)},h.setDefaultOptions=function(e){Object(o["a"])(h.currentOptions,e)},h.resetDefaultOptions=function(){h.currentOptions=Object(o["a"])({},h.defaultOptions)},h.install=function(){s["a"].use(c)},s["a"].prototype.$dialog=h,h.resetDefaultOptions();t["a"]=h},"2fcb":function(e,t,a){},"565f":function(e,t,a){"use strict";var n=a("c31d"),o=a("fe7e"),s=a("3583"),i=a("a142");t["a"]=Object(o["a"])({render:function(){var e,t=this,a=t.$createElement,n=t._self._c||a;return n("cell",{class:t.b((e={error:t.error,disabled:t.$attrs.disabled,"min-height":"textarea"===t.type&&!t.autosize},e["label-"+t.labelAlign]=t.labelAlign,e)),attrs:{icon:t.leftIcon,title:t.label,center:t.center,border:t.border,"is-link":t.isLink,required:t.required}},[t._t("left-icon",null,{slot:"icon"}),t._t("label",null,{slot:"title"}),n("div",{class:t.b("body")},["textarea"===t.type?n("textarea",t._g(t._b({ref:"input",class:t.b("control",t.inputAlign),attrs:{readonly:t.readonly},domProps:{value:t.value}},"textarea",t.$attrs,!1),t.listeners)):n("input",t._g(t._b({ref:"input",class:t.b("control",t.inputAlign),attrs:{type:t.type,readonly:t.readonly},domProps:{value:t.value}},"input",t.$attrs,!1),t.listeners)),t.showClear?n("icon",{class:t.b("clear"),attrs:{name:"clear"},on:{touchstart:function(e){return e.preventDefault(),t.onClear(e)}}}):t._e(),t.$slots.icon||t.icon?n("div",{class:t.b("icon"),on:{click:t.onClickIcon}},[t._t("icon",[n("icon",{attrs:{name:t.icon}})])],2):t._e(),t.$slots.button?n("div",{class:t.b("button")},[t._t("button")],2):t._e()],1),t.errorMessage?n("div",{class:t.b("error-message"),domProps:{textContent:t._s(t.errorMessage)}}):t._e()],2)},name:"field",inheritAttrs:!1,mixins:[s["a"]],props:{error:Boolean,leftIcon:String,readonly:Boolean,clearable:Boolean,labelAlign:String,inputAlign:String,onIconClick:Function,autosize:[Boolean,Object],errorMessage:String,type:{type:String,default:"text"}},data:function(){return{focused:!1}},watch:{value:function(){this.$nextTick(this.adjustSize)}},mounted:function(){this.format(),this.$nextTick(this.adjustSize)},computed:{showClear:function(){return this.clearable&&this.focused&&""!==this.value&&this.isDef(this.value)&&!this.readonly},listeners:function(){return Object(n["a"])({},this.$listeners,{input:this.onInput,keypress:this.onKeypress,focus:this.onFocus,blur:this.onBlur})}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},format:function(e){void 0===e&&(e=this.$refs.input);var t=e,a=t.value,n=this.$attrs.maxlength;return"number"===this.type&&this.isDef(n)&&a.length>n&&(a=a.slice(0,n),e.value=a),a},onInput:function(e){this.$emit("input",this.format(e.target))},onFocus:function(e){this.focused=!0,this.$emit("focus",e),this.readonly&&this.blur()},onBlur:function(e){this.focused=!1,this.$emit("blur",e)},onClickIcon:function(){this.$emit("click-icon"),this.onIconClick&&this.onIconClick()},onClear:function(){this.$emit("input",""),this.$emit("clear")},onKeypress:function(e){if("number"===this.type){var t=e.keyCode,a=-1===String(this.value).indexOf("."),n=t>=48&&t<=57||46===t&&a||45===t;n||e.preventDefault()}"search"===this.type&&13===e.keyCode&&this.blur(),this.$emit("keypress",e)},adjustSize:function(){var e=this.$refs.input;if("textarea"===this.type&&this.autosize&&e){e.style.height="auto";var t=e.scrollHeight;if(Object(i["e"])(this.autosize)){var a=this.autosize,n=a.maxHeight,o=a.minHeight;n&&(t=Math.min(t,n)),o&&(t=Math.max(t,o))}t&&(e.style.height=t+"px")}}}})},"77d2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"address"},[a("van-popup",{attrs:{position:"top",overlay:!1},model:{value:e.showNavBar,callback:function(t){e.showNavBar=t},expression:"showNavBar"}},[a("van-nav-bar",{attrs:{title:e.title},on:{"click-left":e.onClickLeft,"click-right":e.onClickRight}},[a("van-icon",{attrs:{slot:"left",name:"arrow-left",color:"#000",size:"20px"},slot:"left"}),a("van-icon",{attrs:{slot:"right",name:"wap-home",color:"#000",size:"20px"},slot:"right"})],1)],1),a("div",{staticClass:"content"},[a("van-address-edit",{attrs:{"area-list":e.areaList,"address-info":e.addressInfo,"show-postal":"","show-delete":"","show-set-default":"","show-search-result":"","search-result":e.searchResult},on:{save:e.onSave,delete:e.onDelete,"change-detail":e.onChangeDetail}})],1)],1)},o=[],s=a("bd86"),i=(a("7f7f"),a("68ef"),a("1146"),a("4d75"),a("b258"),a("2fcb"),a("a526"),a("d9d2"),a("afaa"),a("b7e7"),a("c31d")),r=a("fe7e"),l=a("a142"),c=a("565f"),u=a("b650"),d=a("e41f"),h=a("d399"),f=a("2241"),m=a("1125"),p=Object(r["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cell",{class:e.b()},[a("field",e._g({ref:"field",attrs:{autosize:"",rows:e.detailRows,clearable:!e.isAndroid,type:"textarea",maxlength:"200",value:e.value,error:e.error,label:e.$t("label"),placeholder:e.$t("placeholder")}},e.$listeners),[e.showIcon&&e.isAndroid?a("div",{class:e.b("finish"),attrs:{slot:"icon"},domProps:{textContent:e._s(e.$t("complete"))},on:{click:function(t){e.$refs.field.blur()}},slot:"icon"}):e._e()]),e._l(e.searchList,function(t){return a("cell",{key:t.name+t.address,attrs:{title:t.name,label:t.address,icon:"location-o",clickable:""},on:{click:function(a){e.onSelect(t)}}})})],2)},name:"address-edit-detail",components:{Field:c["a"]},props:{value:String,error:Boolean,focused:Boolean,detailRows:Number,searchResult:Array,showSearchResult:Boolean},created:function(){this.isAndroid=Object(l["c"])()},computed:{searchList:function(){return this.showSearchResult&&this.focused&&this.searchResult||[]},showIcon:function(){return this.value&&this.focused}},methods:{onSelect:function(e){this.$emit("select-search",e),this.$emit("input",((e.address||"")+" "+(e.name||"")).trim())}}}),v=Object(r["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.b({on:e.value,disabled:e.disabled}),style:e.style,on:{click:e.onClick}},[a("div",{class:e.b("node")},[e.loading?a("loading",{class:e.b("loading")}):e._e()],1)])},name:"switch",props:{value:Boolean,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,size:{type:String,default:"30px"}},computed:{style:function(){return{fontSize:this.size,backgroundColor:this.value?this.activeColor:this.inactiveColor}}},methods:{onClick:function(){this.disabled||this.loading||(this.$emit("input",!this.value),this.$emit("change",!this.value))}}}),b=Object(r["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cell",{class:e.b(),attrs:{center:"",title:e.title,border:e.border}},[a("van-switch",e._b({on:{input:function(t){e.$emit("input",t)}}},"van-switch",e.$props,!1))],1)},name:"switch-cell",components:{VanSwitch:v},props:{title:String,value:Boolean,border:Boolean,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,size:{type:String,default:"24px"}},watch:{value:function(){this.$emit("change",this.value)}}});function g(e){return e=e.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(e)||/^0[0-9-]{10,13}$/.test(e)}var w={name:"",tel:"",country:"",province:"",city:"",county:"",areaCode:"",postalCode:"",addressDetail:"",isDefault:!1},y=Object(r["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.b()},[a("field",{attrs:{clearable:"",label:e.$t("name"),placeholder:e.$t("namePlaceholder"),error:e.errorInfo.name},on:{focus:function(t){e.onFocus("name")}},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),a("field",{attrs:{clearable:"",type:"tel",label:e.$t("tel"),placeholder:e.$t("telPlaceholder"),error:e.errorInfo.tel},on:{focus:function(t){e.onFocus("tel")}},model:{value:e.data.tel,callback:function(t){e.$set(e.data,"tel",t)},expression:"data.tel"}}),a("field",{directives:[{name:"show",rawName:"v-show",value:e.showArea,expression:"showArea"}],attrs:{readonly:"",label:e.$t("area"),placeholder:e.$t("areaPlaceholder"),value:e.areaText},on:{click:function(t){e.showAreaPopup=!0}}}),a("address-edit-detail",{directives:[{name:"show",rawName:"v-show",value:e.showDetail,expression:"showDetail"}],attrs:{focused:e.detailFocused,value:e.data.addressDetail,error:e.errorInfo.addressDetail,"detail-rows":e.detailRows,"search-result":e.searchResult,"show-search-result":e.showSearchResult},on:{focus:function(t){e.onFocus("addressDetail")},blur:function(t){e.detailFocused=!1},input:e.onChangeDetail,"select-search":function(t){e.$emit("select-search",t)}}}),e.showPostal?a("field",{directives:[{name:"show",rawName:"v-show",value:!e.hideBottomFields,expression:"!hideBottomFields"}],attrs:{type:"tel",maxlength:"6",label:e.$t("postal"),placeholder:e.$t("postal"),error:e.errorInfo.postalCode},on:{focus:function(t){e.onFocus("postalCode")}},model:{value:e.data.postalCode,callback:function(t){e.$set(e.data,"postalCode",t)},expression:"data.postalCode"}}):e._e(),e._t("default"),e.showSetDefault?a("switch-cell",{directives:[{name:"show",rawName:"v-show",value:!e.hideBottomFields,expression:"!hideBottomFields"}],attrs:{title:e.$t("defaultAddress")},on:{change:function(t){e.$emit("change-default",t)}},model:{value:e.data.isDefault,callback:function(t){e.$set(e.data,"isDefault",t)},expression:"data.isDefault"}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideBottomFields,expression:"!hideBottomFields"}],class:e.b("buttons")},[a("van-button",{attrs:{block:"",loading:e.isSaving,type:"danger",text:e.saveButtonText||e.$t("save")},on:{click:e.onSave}}),e.showDelete?a("van-button",{attrs:{block:"",loading:e.isDeleting,text:e.deleteButtonText||e.$t("delete")},on:{click:e.onDelete}}):e._e()],1),a("popup",{attrs:{position:"bottom","lazy-render":!1,"get-container":"body"},model:{value:e.showAreaPopup,callback:function(t){e.showAreaPopup=t},expression:"showAreaPopup"}},[a("van-area",{ref:"area",attrs:{loading:!e.areaListLoaded,value:e.data.areaCode,"area-list":e.areaList},on:{confirm:e.onAreaConfirm,cancel:function(t){e.showAreaPopup=!1}}})],1)],2)},name:"address-edit",components:{Field:c["a"],Popup:d["a"],VanArea:m["a"],VanButton:u["a"],SwitchCell:b,AddressEditDetail:p},props:{areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showDelete:Boolean,showPostal:Boolean,searchResult:Array,showSetDefault:Boolean,showSearchResult:Boolean,saveButtonText:String,deleteButtonText:String,showArea:{type:Boolean,default:!0},showDetail:{type:Boolean,default:!0},detailRows:{type:Number,default:1},addressInfo:{type:Object,default:function(){return Object(i["a"])({},w)}},telValidator:{type:Function,default:g}},data:function(){return{data:{},showAreaPopup:!1,detailFocused:!1,errorInfo:{tel:!1,name:!1,postalCode:!1,addressDetail:!1}}},computed:{hideBottomFields:function(){return this.searchResult.length&&this.detailFocused},areaListLoaded:function(){return Object(l["e"])(this.areaList)&&Object.keys(this.areaList).length},areaText:function(){var e=this.data,t=e.country,a=e.province,n=e.city,o=e.county,s=e.areaCode;if(s){var i=[t,a,n,o];return a&&a===n&&i.splice(1,1),i.filter(function(e){return e}).join("/")}return""}},watch:{addressInfo:{handler:function(e){this.data=Object(i["a"])({},w,e),this.setAreaCode(e.areaCode)},deep:!0,immediate:!0},areaList:function(){this.setAreaCode(this.data.areaCode)}},methods:{onFocus:function(e){this.errorInfo[e]=!1,this.detailFocused="addressDetail"===e,this.$emit("focus",e)},onChangeDetail:function(e){this.data.addressDetail=e,this.$emit("change-detail",e)},onAreaConfirm:function(e){this.showAreaPopup=!1,this.assignAreaValues(),this.$emit("change-area",e)},assignAreaValues:function(){var e=this.$refs.area;if(e){var t=e.getArea();t.areaCode=t.code,delete t.code,Object(i["a"])(this.data,t)}},onSave:function(){var e=this,t=["name","tel","areaCode","addressDetail"];this.showPostal&&t.push("postalCode");var a=t.every(function(t){var a=e.getErrorMessage(t);return a&&(e.errorInfo[t]=!0,Object(h["a"])(a)),!a});a&&!this.isSaving&&this.$emit("save",this.data)},getErrorMessage:function(e){var t=String(this.data[e]||"").trim(),a=this.$t;if(this.validator){var n=this.validator(e,t);if(n)return n}switch(e){case"name":return t?"":a("nameEmpty");case"tel":return this.telValidator(t)?"":a("telInvalid");case"areaCode":return t?"":a("areaEmpty");case"addressDetail":return t?"":a("addressEmpty");case"postalCode":return t&&!/^\d{6}$/.test(t)?a("postalEmpty"):""}},onDelete:function(){var e=this;f["a"].confirm({title:this.$t("confirmDelete")}).then(function(){e.$emit("delete",e.data)}).catch(function(){e.$emit("cancel-delete",e.data)})},getArea:function(){return this.$refs.area?this.$refs.area.getValues():[]},setAreaCode:function(e){this.data.areaCode=e||"",e&&this.$nextTick(this.assignAreaValues)},setAddressDetail:function(e){this.data.addressDetail=e}}}),C=a("9c9e"),$=a("47b3"),k={name:"addressEdit",components:Object(s["a"])({},y.name,y),props:{},mixins:[C["b"],C["a"]],data:function(){return{areaList:$["a"],searchResult:[],addressInfo:{}}},watch:{},computed:{title:function(){return"add"===this.$route.params.option?"新增地址":"编辑地址"}},methods:{onChangeDetail:function(){},onSave:function(e){e.address=e.province+e.city+e.county+e.addressDetail,this.$router.push({name:"addressList",params:{item:e}})},onDelete:function(e){this.$router.push({name:"addressList",params:{item:e,option:"del"}})},onClickLeft:function(){this.$router.push({name:"addressList",params:{item:this.addressInfo}})},onClickRight:function(){this.$router.push({name:"home"})}},activated:function(){this.addressInfo=this.$route.params.addressInfo},mounted:function(){}},x=k,B=(a("e5d0"),a("2877")),_=Object(B["a"])(x,n,o,!1,null,"1d5a8388",null);_.options.__file="AddressEdit.vue";t["default"]=_.exports},afaa:function(e,t,a){},b258:function(e,t,a){},b7e7:function(e,t,a){},c4e8:function(e,t,a){},d399:function(e,t,a){"use strict";var n=a("c31d"),o=a("2b0e"),s=a("fe7e"),i=a("6605"),r=["success","fail","loading"],l=Object(s["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"van-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],class:e.b([e.style,e.position])},["text"===e.style?a("div",{domProps:{textContent:e._s(e.message)}}):e._e(),"html"===e.style?a("div",{domProps:{innerHTML:e._s(e.message)}}):e._e(),"default"===e.style?["loading"===e.type?a("loading",{attrs:{color:"white",type:e.loadingType}}):a("icon",{class:e.b("icon"),attrs:{name:e.type}}),e.isDef(e.message)?a("div",{class:e.b("text"),domProps:{textContent:e._s(e.message)}}):e._e()]:e._e()],2)])},name:"toast",mixins:[i["a"]],props:{forbidClick:Boolean,message:[String,Number],type:{type:String,default:"text"},loadingType:{type:String,default:"circular"},position:{type:String,default:"middle"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},computed:{style:function(){return-1!==r.indexOf(this.type)?"default":this.type}},mounted:function(){this.toggleClickale()},destroyed:function(){this.toggleClickale()},watch:{value:function(){this.toggleClickale()},forbidClick:function(){this.toggleClickale()}},methods:{toggleClickale:function(){var e=this.value&&this.forbidClick;if(this.clickable!==e){this.clickable=e;var t=e?"add":"remove";document.body.classList[t]("van-toast--unclickable")}}}}),c=a("a142"),u={type:"text",mask:!1,message:"",value:!0,duration:3e3,position:"middle",loadingType:"circular",forbidClick:!1,overlayStyle:{}},d=function(e){return Object(c["e"])(e)?e:{message:e}},h=[],f=!0,m=Object(n["a"])({},u);function p(){if(c["f"])return{};if(!h.length||!f){var e=new(o["a"].extend(l))({el:document.createElement("div")});document.body.appendChild(e.$el),h.push(e)}return h[h.length-1]}function v(e){return e.overlay=e.mask,e}function b(e){void 0===e&&(e={});var t=p();return e=Object(n["a"])({},m,d(e),{clear:function(){t.value=!1,f||c["f"]||(document.body.removeChild(t.$el),t.$destroy())}}),Object(n["a"])(t,v(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout(function(){t.clear()},e.duration)),t}var g=function(e){return function(t){return b(Object(n["a"])({type:e},d(t)))}};["loading","success","fail"].forEach(function(e){b[e]=g(e)}),b.clear=function(e){h.length&&(e?(h.forEach(function(e){e.clear()}),h=[]):f?h[0].clear():h.shift().clear())},b.setDefaultOptions=function(e){Object(n["a"])(m,e)},b.resetDefaultOptions=function(){m=Object(n["a"])({},u)},b.allowMultiple=function(e){void 0===e&&(e=!0),f=!e},b.install=function(){o["a"].use(l)},o["a"].prototype.$toast=b;t["a"]=b},d9d2:function(e,t,a){},e5d0:function(e,t,a){"use strict";var n=a("c4e8"),o=a.n(n);o.a}}]);
//# sourceMappingURL=addressEdit.2d30034a.js.map